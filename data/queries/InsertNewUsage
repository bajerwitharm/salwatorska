INSERT INTO usage(timestamp, mac, data_in, data_out) SELECT datetime('now'),'{1}', t1.data_in+'{2}', t1.data_out+'{3}' FROM usage t1 WHERE EXISTS (SELECT 1 FROM usage WHERE mac = '{1}') LIMIT 1; 
INSERT INTO usage(timestamp, mac, data_in, data_out) SELECT datetime('now'),'{1}','{2}','{3}' WHERE NOT EXISTS (SELECT 1 FROM usage WHERE mac = '{1}');